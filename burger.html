<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Burger</title>
</head>

<body>
    <script>
        'use strict';
        class Burger {
            constructor(size = '', price = 0, calories = 0) {
                this.size = size;
                this.price = price;
                this.calories = calories;
            }

            // общая стоимость и калорийность гамбургера
            totalPrice = 0;
            totalCalories = 0;

            // начинка (обязательная)
            filling = { name: '', price: 0, calories: 0 }

            // массив необязательных добавок (приправа, майонез)
            addOns = []

            getParams() {
                this.getSize();
                this.getFilling();
                this.getAddOns();
            }

            getSize() {
                while (this.price == 0) {
                    let answer = prompt(`Выберите размер:
                     S - маленький (50 р. / 20 кал.)
                     L - большой (100 р. / 40 кал.)`).toLowerCase();
                    switch (answer) {
                        case 's':
                            this.size = 'Маленький';
                            this.price = 50;
                            this.calories = 20;
                            break;
                        case 'l':
                            this.size = 'Большой';
                            this.price = 100;
                            this.calories = 40;
                            break;
                        default:
                            alert('Неправильный размер');
                    }
                }
            }

            getFilling() {
                // пока цена начинки не станет больше 0, повторяем запрос
                while (this.filling.price == 0) {
                    let i = +prompt(`Выберите начинку:
                    1 - Сыр (10 р. / 20 кал.)
                    2 - Салат (20 р. / 5 кал.)
                    3 - Картофель (15 р. / 10 кал.`);
                    // берём нужную начинку из массива доступных начинок
                    if ((i >= 1) && (i <= 3)) {
                        this.filling = fillingsAvailable[i - 1];
                    } else {
                        alert('Неправильная начинка');
                    }
                }
            }

            getAddOns() {
                if (prompt('Добавить приправу? 15 р. / 0 кал. ( Y - Да )').toLowerCase() == 'y') {
                    this.addOns.push(addOnsAvailable[0]);
                }

                if (prompt('Добавить майонез? 20 р. / 5 кал. ( Y - Да )').toLowerCase() == 'y') {
                    this.addOns.push(addOnsAvailable[1]);
                }
            }

            calcTotals() {
                // добавляем цену и калории основы и начинки
                this.totalPrice += this.price + this.filling.price;
                this.totalCalories += this.calories + this.filling.calories;
                // если есть добавки, добавляем их цены и калории 
                if (this.addOns.length > 0) {
                    this.addOns.forEach(item => {
                        this.totalPrice += item.price;
                        this.totalCalories += item.calories;
                    });
                }
            }

            renderTotalInfo() {
                let totalInfo = `Ваш гамбургер:
                Размер: ${this.size} ( ${this.price} р. / ${this.calories} кал. )
                Начинка: ${this.filling.name} ( ${this.filling.price} р. / ${this.filling.calories} кал. )\n`;
                if (this.addOns.length > 0) {
                    totalInfo += `Добавки:
                `;
                    this.addOns.forEach(item => {
                        totalInfo += `${item.name} ( ${item.price} р. / ${item.calories} кал. )
                `;
                    });
                }
                totalInfo += `\nИтого: ${this.totalPrice} р. ( ${this.totalCalories} кал. )`;
                return totalInfo;
            }

        }

        // массивы доступных начинок и добавок
        const fillingsAvailable = [
            { name: 'Сыр', price: 10, calories: 20 },
            { name: 'Салат', price: 20, calories: 5 },
            { name: 'Картофель', price: 15, calories: 10 }
        ];

        const addOnsAvailable = [
            { name: 'Приправа', price: 15, calories: 0 },
            { name: 'Майонез', price: 20, calories: 5 }
        ];

        // создаём экземпляр гамбургера, запрашиваем его параметры
        const burger = new Burger();
        burger.getParams();

        // считаем и выводим общую стоимость
        burger.calcTotals();
        alert(burger.renderTotalInfo());

    </script>
</body>

</html>